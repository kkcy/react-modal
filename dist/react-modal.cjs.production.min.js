"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t=require("@mattjennings/react-modal-stack"),n=require("framer-motion"),o=require("react"),i=(e=o)&&"object"==typeof e&&"default"in e?e.default:e,l=require("theme-ui"),r=require("@theme-ui/match-media"),a=require("react-scrolllock"),u=i.createContext({});function s(){return o.useContext(u)}var c=n.motion(l.Box);function d(e){var t=s(),n=t.skipAnimations;return t.isFullScreen?null:i.createElement(c,Object.assign({"aria-hidden":"true",variant:"modals.backdrop",custom:{skip:n},variants:{enter:{opacity:1,transition:{duration:.2}},exit:function(e){return(void 0===e?{}:e).skip?{transition:{duration:.2}}:{opacity:0,transition:{duration:.2}}}},animate:"enter",initial:!n&&"exit",exit:"exit"},e))}function f(e){var t=e.stack,l=e.closeModal,r=o.useState(t),a=r[0],u=r[1],s=o.useState(!1),c=s[0],f=s[1],m=o.useState(!1),p=m[0],x=m[1];return o.useEffect((function(){var e,n,o,i,l;1===t.length&&0===a.length?(x(!0),u(t)):(null!=(e=null==t||null==(n=t[t.length-1])||null==(o=n.props)?void 0:o.skipAnimations)?e:null==a||null==(i=a[a.length-1])||null==(l=i.props)?void 0:l.skipAnimations)?(u(t),x(!0),f(!0)):(f(!1),x(!1))}),[t]),o.useEffect((function(){var e,t;f(null==a||null==(e=a[a.length-1])||null==(t=e.props)?void 0:t.skipAnimations)}),[a]),i.createElement(i.Fragment,null,i.createElement(n.AnimatePresence,null,t.length>0&&i.createElement(d,null)),a.map((function(e,n){return i.createElement(e.component,Object.assign({key:n,open:n===a.length-1&&p,Backdrop:null,onClose:l,onAnimationComplete:function(){var n;x(t.length>0),setTimeout((function(){return u(t)})),null==(n=e.props)||null==n.onAnimationComplete||n.onAnimationComplete()},skipAnimations:c},e.props))})))}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function p(e,t){if(null==e)return{};var n,o,i={},l=Object.keys(e);for(o=0;o<l.length;o++)t.indexOf(n=l[o])>=0||(i[n]=e[n]);return i}var x=["allowClose","closeOnOutsideClick","Backdrop","children","fullScreen","maxWidth","onClose","open","skipAnimations","sx","variant","width","animations"],v=n.motion(l.Box),h=i.forwardRef((function(e,t){return i.createElement(l.Box,Object.assign({variant:"modals.content"},e,{ref:t}))})),g=i.forwardRef((function(e,t){return i.createElement(l.Box,Object.assign({variant:"modals.footer"},e,{ref:t}))})),k=["children","CloseButton"],b=i.forwardRef((function(e,t){var n=e.children,o=e.CloseButton,r=p(e,k),a=s(),u=a.allowClose,c=a.onClose;return i.createElement(l.Box,Object.assign({variant:"modals.title"},r,{ref:t}),n,u&&(o?i.createElement(o,{onClick:c}):i.createElement(l.Close,{sx:{height:6,width:6,"&:hover":{cursor:"pointer"}},onClick:c})))})),C={modals:{backdrop:{zIndex:"backdrop",position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.3)"},content:{px:"1rem",flexGrow:1,overflowY:"scroll"},footer:{minHeight:16,display:"flex",alignItems:"center",justifyContent:"flex-end",px:"1rem"},title:{display:"flex",justifyContent:"space-between",alignItems:"center",minHeight:16,px:"1rem"},default:{backgroundColor:"background",borderRadius:"lg",boxShadow:"md",display:"flex",flexDirection:"column",maxHeight:"80vh",minHeight:"16rem",minWidth:"16rem",maxWidth:"min(90vw, 64rem)",position:"absolute",top:["25%","10%","10%"],zIndex:"modal"},defaultFullScreen:{backgroundColor:"background",borderRadius:0,display:"flex",flexDirection:"column",minHeight:"100vh",maxHeight:"100vh",height:"fill-available",position:"absolute",top:0,width:"100vw",zIndex:"modal"}},zIndices:{backdrop:100,modal:110}};exports.AnimatedModalStack=function(e){return i.createElement(t.ModalStack,Object.assign({renderModals:f},e))},exports.Backdrop=d,exports.Modal=function(e){var s=e.allowClose,c=void 0===s||s,f=e.closeOnOutsideClick,h=void 0===f||f,g=e.Backdrop,k=void 0===g?d:g,b=e.children,C=e.fullScreen,y=void 0===C?"xs":C,S=e.maxWidth,w=e.onClose,O=e.open,E=e.skipAnimations,j=void 0!==E&&E,M=e.sx,A=e.variant,I=void 0===A?"default":A,B=e.width,z=void 0===B?"auto":B,R=e.animations,q=p(e,x),F=t.useModals().closeModal,H=o.useMemo((function(){return function(e){var t={default:{enter:{opacity:1,scale:1,transition:{duration:.2,ease:"easeInOut"}},exit:{opacity:0,scale:.75,transition:{duration:.2,ease:"easeInOut"}}},fullScreen:{enter:{opacity:1,y:0,transition:{ease:"easeInOut"}},exit:{opacity:0,y:"100vh",transition:{ease:"easeInOut"}}}};return{fullScreen:null!=e&&e.fullScreen?{enter:e.fullScreen.enter,exit:function(t){var n,o,i;return void 0===t&&(t={}),t.skip?{transition:{duration:0}}:"function"==typeof(null==e||null==(n=e.fullScreen)?void 0:n.exit)?null==(o=e.fullScreen)?void 0:o.exit(t):null==(i=e.fullScreen)?void 0:i.exit}}:t.fullScreen,default:null!=e&&e.default?{enter:e.default.enter,exit:function(t){var n,o,i;return void 0===t&&(t={}),t.skip?{transition:{duration:0}}:"function"==typeof(null==e||null==(n=e.default)?void 0:n.exit)?null==(o=e.default)?void 0:o.exit(t):null==(i=e.default)?void 0:i.exit}}:t.default}}(R)}),[R]),P=r.useResponsiveValue(function(e){switch(e){case!0:return[!0,!0,!0,!0,!0,!0];case!1:return[!1,!1,!1,!1,!1];case"xs":return[!0,!1,!1,!1,!1];case"sm":return[!0,!0,!1,!1,!1];case"md":return[!0,!0,!0,!1,!1];case"lg":return[!0,!0,!0,!0,!1]}}(y)),T=r.useResponsiveValue([P?H.fullScreen:H.default,P?H.fullScreen:H.default,H.default]),W=o.useMemo((function(){return{allowClose:c,onClose:w,skipAnimations:j,isFullScreen:P}}),[c,w,j,P]);return i.createElement(u.Provider,{value:W},i.createElement(n.AnimatePresence,{custom:{skip:j}},O&&i.createElement(a.TouchScrollable,null,i.createElement(l.Box,{sx:{zIndex:"modal",position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",justifyContent:"center"},onClick:h?function(){w?w():F&&F()}:void 0},k&&i.createElement(k,null),i.createElement(v,Object.assign({"aria-modal":"true",variants:T,animate:"enter",exit:"exit",initial:!j&&"exit",variant:P?"modals."+I+"FullScreen":"modals."+I,sx:m({width:P?null:z,maxWidth:P?null:S},null!=M?M:{}),onClick:function(e){return e.stopPropagation()}},q),"function"==typeof b?b(W):b)))))},exports.ModalContent=h,exports.ModalFooter=g,exports.ModalTitle=b,exports.modalTheme=C,exports.useModal=s,exports.withModalTheme=function(e){var t,n;return m({},e,{modals:m({},C.modals,null!=(t=null==e?void 0:e.modals)?t:{}),zIndices:m({},C.zIndices,null!=(n=null==e?void 0:e.zIndices)?n:[])})};
//# sourceMappingURL=react-modal.cjs.production.min.js.map
